all: compile_static compile_dynamic

clean:
	rm main.o main || rm hello?.o hello? || rm libhello.a

compile_slib: hello1.c
	gcc -c hello1.c -o hello1.o
	gcc -c hello1.o -o hello1

compile_dlib: hello2.c
	gcc -fPIC -c hello2.c -o hello2.o

compile_main: main.c
	gcc -c main.c -o main.o

create_static_lib: compile_slib
	ar rcs libhello.a hello1.o

compile_static: create_static_lib compile_main
	gcc -static main.o -o main -L. -lhello1

create_dynamic_lib: compile_dlib
	gcc -shared hello2.o -o libhello.so

compile_dynamic: create_dynamic_lib compile_main
	gcc -s main.o -o main -L. -lhello2
